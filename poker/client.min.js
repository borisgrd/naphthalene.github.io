var Bid,Button,ButtonGroup,CardImage,Col,DropdownButton,GameNavigation,Grid,Hand,HostConfigState,InitializingState,Input,JoinedState,Jumbotron,Label,ListGroup,ListGroupItem,MainState,MenuItem,Nav,NavItem,Navbar,PageHeader,Panel,Pot,Row,Turn,UsernameInput,WagerActions,WaitingForPlayersState,appendMessage,applicationID,client,initializeCastApi,namespace,onError,onInitSuccess,onStopAppSuccess,onSuccess,receiverListener,receiverMessage,sendMessage,session,sessionListener,sessionUpdateListener,stopApp,transcribe;DropdownButton=ReactBootstrap.DropdownButton,ListGroupItem=ReactBootstrap.ListGroupItem,ButtonGroup=ReactBootstrap.ButtonGroup,PageHeader=ReactBootstrap.PageHeader,Jumbotron=ReactBootstrap.Jumbotron,ListGroup=ReactBootstrap.ListGroup,MenuItem=ReactBootstrap.MenuItem,NavItem=ReactBootstrap.NavItem,Button=ReactBootstrap.Button,Navbar=ReactBootstrap.Navbar,Input=ReactBootstrap.Input,Label=ReactBootstrap.Label,Panel=ReactBootstrap.Panel,Grid=ReactBootstrap.Grid,Row=ReactBootstrap.Row,Col=ReactBootstrap.Col,Nav=ReactBootstrap.Nav,CardImage=React.createClass({render:function(){return React.createElement("img",{src:this.props.card?this.props.handVisible?"/images/"+("H"===this.props.card[this.props.card.length-1]?"Hearts":"S"===this.props.card[this.props.card.length-1]?"Spades":"C"===this.props.card[this.props.card.length-1]?"Clubs":"D"===this.props.card[this.props.card.length-1]?"Diamonds":void 0)+"/"+this.props.card+".svg":"/images/card_back.png":"/images/card_outline.svg",width:"290",className:this.props.className})}}),Hand=React.createClass({render:function(){var a;return a=this.props.handVisible,React.createElement("div",{id:"card-container"},this.props.hand.map(function(b,c,d){return React.createElement("div",{id:"card-"+(0===c?"left":"right")},React.createElement(CardImage,{card:b,handVisible:a}))}))}}),WagerActions=React.createClass({render:function(){var a,b;return a=this.props.turn!==client.name||this.props.fold,b=this.props.maxbid===this.props.bid?"Check":"Call",React.createElement(ButtonGroup,{className:"btn-group-vertical"},React.createElement(Button,{bsStyle:"primary",bsSize:"large",disabled:a,onClick:"Check"===b?this.props.onCheck:this.props.onCall},b),React.createElement(DropdownButton,{bsStyle:"warning",bsSize:"large",title:"Raise...",disabled:a,onSelect:this.props.onRaise},React.createElement(MenuItem,{eventKey:"1"},"$5"),React.createElement(MenuItem,{eventKey:"2"},"$10"),React.createElement(MenuItem,{eventKey:"3"},"$25"),React.createElement(MenuItem,{eventKey:"4"},"$50"),React.createElement(MenuItem,{eventKey:"5"},"All in")),React.createElement(Button,{bsStyle:"danger",bsSize:"large",onClick:this.props.onFold,disabled:a},"Fold"),React.createElement(Button,{bsStyle:"default",bsSize:"large",onClick:this.props.toggleCards},this.props.handVisible?"Hide Cards":"Show Cards"))}}),Pot=React.createClass({render:function(){return React.createElement("div",{className:"pot"},React.createElement("h3",null,"Pot: ",React.createElement(Label,null,"$",this.props.amount)))}}),Turn=React.createClass({render:function(){return React.createElement("div",{className:"turn-indicator"},React.createElement("h3",null,"Turn: ",React.createElement(Label,{bsStyle:this.props.turn===client.name?"success":"default"},this.props.turn)))}}),Bid=React.createClass({render:function(){return React.createElement("div",{className:"bid-indicator"},React.createElement("h3",null,"My Bid: ",React.createElement(Label,{bsStyle:this.props.fold?"default":"warning"},this.props.fold?"Fold":"$"+this.props.bid)))}}),GameNavigation=React.createClass({render:function(){return React.createElement(Navbar,{className:"navbar",brand:"Texas Holdem"},React.createElement(Nav,null,client.name?React.createElement(NavItem,{href:"#"},"You are: "+client.name):void 0))}}),UsernameInput=React.createClass({getInitialState:function(){var a;return a=localStorage.username,null===a?{value:""}:{value:a}},handleChange:function(){return this.setState({value:this.refs.uname_input.getValue()})},onSubmit:function(){return sendMessage({action:"join",data:{name:this.state.value}}),localStorage.username=this.state.value,client.name=this.state.value,client.setState("waiting",{})},componentDidMount:function(){return null!==client.name?(sendMessage({action:"join",data:{name:client.name}}),client.setState("waiting",{})):void 0},render:function(){return React.createElement(Panel,{header:"Enter username"},React.createElement(Input,{type:"text",value:this.state.value,placeholder:this.state.value,ref:"uname_input",onChange:this.handleChange}),React.createElement(Button,{bsStyle:"primary",bsSize:"large",onClick:this.onSubmit},"Join Table"))}}),InitializingState=React.createClass({handleMessage:function(a,b){return{}},render:function(){return React.createElement("div",null,React.createElement(GameNavigation,null),React.createElement(Grid,null,React.createElement(Row,null,React.createElement(Col,{xs:6,md:6,lg:6,xsoffset:4,mdoffset:4,lgoffset:4},React.createElement("h3",null," Please connect to the chromecast "),React.createElement("p",null,React.createElement(Button,{bsStyle:"primary",bsSize:"large"},"Connect via the ",React.createElement("img",{src:"/images/casticon.on.png",id:"casticon",width:"30"})," button in your toolbar"))))))}}),JoinedState=React.createClass({handleMessage:function(a,b){switch(b.status){case"host":return client.setState("host",{});case"start":return client.setState("main",b.data);default:return console.log("unrecognized status received: "+b.status)}},render:function(){return React.createElement("div",null,React.createElement(GameNavigation,null),React.createElement(Grid,null,React.createElement(Row,null,React.createElement(Col,{xs:4,md:4,lg:4,xsoffset:8,mdoffset:8,lgoffset:8},React.createElement(UsernameInput,null)))))}}),HostConfigState=React.createClass({handleMessage:function(a,b){return{}},onSubmit:function(){return sendMessage({action:"start",data:{}}),client.setState("main",{initialRemaining:1e3})},render:function(){return React.createElement("div",null,React.createElement(GameNavigation,null),React.createElement(Grid,null,React.createElement(Row,null,React.createElement(Col,{xs:8,md:8,lg:8,xsoffset:4,mdoffset:4,lgoffset:4},React.createElement("h3",null,"You are the host. Please configure the table"),React.createElement("h3",null,"Confirm using the button below once all players have joined"))),React.createElement(Button,{bsStyle:"primary",bsSize:"large",onClick:this.onSubmit},"Done")))}}),WaitingForPlayersState=React.createClass({handleMessage:function(a,b){switch(b.status){case"host":return client.setState("host",{});case"start":return client.setState("main",b.data);default:return console.log("Unrecognized status received: "+b.status)}},render:function(){return React.createElement("div",null,React.createElement(GameNavigation,null),React.createElement(Grid,null,React.createElement(Row,null,React.createElement(Col,{xs:4,md:4,lg:4,xsoffset:8,mdoffset:8,lgoffset:8},React.createElement("h3",null,"Waiting for additional players or\nfor the host to start the game!")))))}}),MainState=React.createClass({handleMessage:function(a,b){switch(b.status){case"deal":return this.setState(b.data);case"turn":return this.setState(b.data);case"maxbid":return this.setState(b.data);case"raiseok":case"callok":case"checkok":return this.setState(b.data);case"raisefail":case"callfail":case"checkfail":return console.error(b.data.reason);default:return console.error("Unknown status received")}},onFold:function(){return this.setState({fold:!0}),sendMessage({action:"fold",data:{}})},onRaise:function(a){var b;return b={1:5,2:10,3:25,4:50,5:this.state.remaining},sendMessage({action:"raise",data:{amount:b[a]}})},onCall:function(){return sendMessage({action:"call",data:{}})},onCheck:function(){return sendMessage({action:"check",data:{}})},toggleCards:function(){return this.setState({handVisible:!this.state.handVisible})},getInitialState:function(){return{hand:[null,null],handVisible:!1,fold:!1,bid:0,maxbid:0,remaining:this.props.initialRemaining,turn:null}},render:function(){return React.createElement("div",null,React.createElement(GameNavigation,null),React.createElement(Grid,{id:"game-grid"},React.createElement(Row,{id:"row-game-main",className:"row-centered"},React.createElement(Col,{xs:8,md:8,lg:6},this.state.fold?React.createElement("h3",null,"You have folded"):this.state.hand?React.createElement(Hand,{hand:this.state.hand,handVisible:this.state.handVisible}):null),React.createElement(Col,{xs:3,md:3,lg:3,xsoffset:2,mdoffset:3,lgoffset:4},React.createElement(Row,null,React.createElement(Turn,{turn:this.state.turn}),React.createElement(Bid,{fold:this.state.fold,bid:this.state.bid}),React.createElement("h3",null,"Remaining ",React.createElement(Label,null,"$",this.state.remaining)),React.createElement(WagerActions,{turn:this.state.turn,toggleCards:this.toggleCards,onFold:this.onFold,onRaise:this.onRaise,onCall:this.onCall,onCheck:this.onCheck,maxbid:this.state.maxbid,bid:this.state.bid,fold:this.state.fold,handVisible:this.state.handVisible}))))))}}),client={state:null,name:null,prevState:null,container:null,state_data:null,states:{main:MainState,host:HostConfigState,joined:JoinedState,waiting:WaitingForPlayersState,initializing:InitializingState},handleMessage:function(a){return this.container.handleMessage(this,a)},setState:function(a,b){return this.state===a&&null!==this.container?(console.log("Updating state: "+b),this.container.setProps(b)):(this.prevState=this.state,this.state=a,this.container=React.render(React.createElement(this.states[a],b),document.getElementById("content")))}},applicationID="409AB6BB",namespace="urn:x-cast:sadikov.apps.pokair",session=null,initializeCastApi=function(){var a,b;return b=new chrome.cast.SessionRequest(applicationID),a=new chrome.cast.ApiConfig(b,sessionListener,receiverListener),chrome.cast.initialize(a,onInitSuccess,onError)},onInitSuccess=function(){return appendMessage("onInitSuccess"),client.setState("initializing",{})},onError=function(a){return appendMessage("onError: "+JSON.stringify(a))},onSuccess=function(a){return appendMessage("onSuccess: "+a)},onStopAppSuccess=function(){return appendMessage("onStopAppSuccess")},sessionListener=function(a){return appendMessage("New session ID:"+a.sessionId),a.sessionId,session=a,session.addUpdateListener(sessionUpdateListener),session.addMessageListener(namespace,receiverMessage),client.setState("joined",{players:["nan"]})},sessionUpdateListener=function(a){var b;return b=a?"Session Updated":"Session Removed",b+=": "+session.sessionId,appendMessage(b),a?void 0:(session=null,client.setState("initializing"))},receiverMessage=function(a,b){return appendMessage("receiverMessage: "+a+", "+b),client.handleMessage(JSON.parse(b))},receiverListener=function(a){return appendMessage("available"===a?"receiver found":"receiver list empty")},stopApp=function(){return session.stop(onStopAppSuccess,onError)},sendMessage=function(a){return null!==session?session.sendMessage(namespace,a,onSuccess.bind(this,"Message sent: "+a),onError):(onSuccess=function(b){return session=b,session.sendMessage(namespace,a,onSuccess.bind(this,"Message sent: "+a),onError)},chrome.cast.requestSession(onSuccess,onError))},appendMessage=function(a){var b,c;return c=new Date,a=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"  "+a,console.log(a),b=document.getElementById("debugmessage"),b.innerHTML+="\n"+JSON.stringify(a)},transcribe=function(a){return sendMessage(a)},chrome.cast&&chrome.cast.isAvailable||setTimeout(initializeCastApi,1e3);