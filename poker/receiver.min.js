var BigBlindToken,Button,ButtonGroup,CARDS,CardImage,Col,ConnectedPlayers,DealerToken,DropdownButton,Flush,FourOfAKind,FullHouse,Grid,HighCard,InitState,Input,Jumbotron,Label,ListGroup,ListGroupItem,MainState,MenuItem,Nav,NavItem,Navbar,OnePair,PageHeader,Panel,Players,RANKS,Row,RoyalFlush,SUITS,SmallBlindToken,Straight,StraightFlush,Table,TableInfo,ThreeOfAKind,TwoPair,Well,displayText,memoize,table,indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},extend=function(a,b){function c(){this.constructor=a}for(var d in b)hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},hasProp={}.hasOwnProperty;DropdownButton=ReactBootstrap.DropdownButton,ListGroupItem=ReactBootstrap.ListGroupItem,ButtonGroup=ReactBootstrap.ButtonGroup,PageHeader=ReactBootstrap.PageHeader,Jumbotron=ReactBootstrap.Jumbotron,ListGroup=ReactBootstrap.ListGroup,MenuItem=ReactBootstrap.MenuItem,NavItem=ReactBootstrap.NavItem,Button=ReactBootstrap.Button,Navbar=ReactBootstrap.Navbar,Input=ReactBootstrap.Input,Table=ReactBootstrap.Table,Label=ReactBootstrap.Label,Panel=ReactBootstrap.Panel,Grid=ReactBootstrap.Grid,Well=ReactBootstrap.Well,Row=ReactBootstrap.Row,Col=ReactBootstrap.Col,Nav=ReactBootstrap.Nav,SUITS=["H","D","S","C"],CARDS=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],RANKS=["HC","1P","2P","3K","ST","FL","FH","4K","SF","RF"],memoize=function(a){return function(){var b,c,d,e;for(b=Array.prototype.slice.call(arguments),d="",e=b.length,c=null;e--;)c=b[e],d+=c===Object(c)?JSON.stringify(c):c,a.memoize||(a.memoize={});return indexOf.call(a.memoize,d)>=0?a.memoize[d]:a.memoize[d]=a.apply(this,b)}},CardImage=React.createClass({render:function(){return React.createElement("object",{data:this.props.card?"/images/"+("H"===this.props.card.slice(-1)?"Hearts":"S"===this.props.card.slice(-1)?"Spades":"C"===this.props.card.slice(-1)?"Clubs":"D"===this.props.card.slice(-1)?"Diamonds":void 0)+"/"+this.props.card+".svg":"/images/card_outline.svg",type:"image/svg+xml",width:"100px",className:this.props.className})}}),TableInfo=React.createClass({render:function(){return React.createElement("div",{className:"vertical-center"},React.createElement(Panel,{header:"Community Cards - "+this.props.communityState,className:"panel-transparent"},React.createElement("ul",{className:"list-inline"},React.createElement("li",null,React.createElement(CardImage,{card:this.props.cards.flop[0]})),React.createElement("li",null,React.createElement(CardImage,{card:this.props.cards.flop[1]})),React.createElement("li",null,React.createElement(CardImage,{card:this.props.cards.flop[2]})),React.createElement("li",null,React.createElement(CardImage,{card:this.props.cards.turn})),React.createElement("li",null,React.createElement(CardImage,{card:this.props.cards.river}))),React.createElement("ul",{className:"list-inline"},React.createElement("li",null,"Hand ",React.createElement(Label,{bsStyle:"default"},"#"+this.props.hand)),React.createElement("li",null,"Current bid: ",React.createElement(Label,{bsStyle:"danger"},"$"+this.props.bid)),React.createElement("li",null,"Total pot: ",React.createElement(Label,{bsStyle:"info"},"$"+this.props.pot)))))}}),ConnectedPlayers=React.createClass({render:function(){return React.createElement(Panel,{header:"Connected players"},React.createElement(Table,{striped:!0,bordered:!0,condensed:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"))),this.props.players.map(function(a){return React.createElement("tr",null,React.createElement("td",null,a.name))})))}}),DealerToken=React.createClass({render:function(){return React.createElement("div",{className:"dealer token"},"D")}}),SmallBlindToken=React.createClass({render:function(){return React.createElement("div",{className:"small-blind token"},"S")}}),BigBlindToken=React.createClass({render:function(){return React.createElement("div",{className:"big-blind token"},"B")}}),Players=React.createClass({render:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(m=Math.PI/this.props.players.length,a=m/2,j=500,h=window.innerWidth/2-50,l=[],d=0,k=this.props.players,e=0,g=k.length;g>e;e++)i=k[e],f=j*Math.cos(a)+h+"px",o=j*Math.sin(a)-100+"px",n={left:f,top:o},b="semicircle panel-transparent "+(this.props.turn===i.name?"player-turn":""),a+=m,c=i.name,l.push(React.createElement(Panel,{key:d,className:b,style:n,header:i.name},i.fold?React.createElement("p",null,"FOLD"):React.createElement("p",null,"Bid: $"+i.bid),React.createElement("ul",{className:"list-inline"},i.dealer?React.createElement("li",null,React.createElement(DealerToken,null)):void 0,"S"===i.blind?React.createElement("li",null,React.createElement(SmallBlindToken,null)):"B"===i.blind?React.createElement("li",null,React.createElement(BigBlindToken,null)):""))),d+=1;return React.createElement("div",{id:"player-display"},l)}}),InitState=React.createClass({handleMessage:function(a,b,c){return"start"===c.action?(window.messageBus.broadcast(JSON.stringify({status:"start",data:c.data})),table.setState("main",{})):void 0},getInitialState:function(){return{players:[]}},render:function(){return React.createElement("div",null,React.createElement(Grid,{id:"game-grid"},React.createElement(Row,{id:"row-game-main",className:"row-centered"},React.createElement(Col,{xs:8,md:8,lg:6},React.createElement("h3",null,"Waiting for players to join..."),React.createElement(ConnectedPlayers,{players:this.state.players})))))}}),MainState=React.createClass({endHand:function(a){var b,c;try{return this.awardPotTo(a),table.deck=this.shuffle(this.generateSortedDeck()),this.setState({dealer:(this.state.dealer+1)%this.state.players.length}),this.dealHand(this.state.dealer)}catch(c){return b=c,console.error(b)}},combinations:function(a,b){var c,d,e;return c=a.length,e=this,b>c?[]:b?b===c?[a]:(d=function(c,d,f){return c.concat(e.combinations(a.slice(f+1),b-1).map(function(a){return[d].concat(a)}))},a.reduce(d,[])):[[]]},computeWinner:function(){var a,b,c,d,e;return d=this,a=d.state.communityCards,e=memoize(function(a){return CARDS.indexOf(a.slice(0,-1))}),c=memoize(function(a){return a.slice(-1)[0]}),b=function(b,f,g,h){var i,j,k,l,m;return f.fold?b:(l=f.hand,l=l.concat(a.flop),l.push(a.turn),l.push(a.river),l=d.sortHand(l),console.log("Player "+d.state.players[g].name+" has this sorted hand: "+l),console.log("Current best players are: "+b.ls),console.log("Current best hand is: "+b.hand),k=function(a,b,f,g){var h,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z;try{return k=d.dupCounts(b.map(function(a){return e(a)})),n=b.every(function(a,b,d){return!b||c(a)===c(d[0])}),i=function(a,b,c,d){var f,g,h,i;return i=function(a,b){var f;return f=12===a&&4===c&&!e(d[0]),[f||a===b+1,f]},g=i(e(b),a[1]),f=g[0],h=g[1],[!c||a[0]&&f,h?3:e(b)]},s=b.reduce(i,[!0,-1]),u=s[0],v=s[1],t=n&&u&&12===v,r=2===k.length,q=r?[0,1].map(function(a){return 4===k[a][1]}).indexOf(!0):!1,h=r?[0,1].map(function(a){return 3===k[a][1]}).indexOf(!0):!1,x=3===k.length,w=x?[0,1,2].map(function(a){return 3===k[a][1]}).indexOf(!0):!1,z=function(a,b){var c;return c=2===k[b[0]][1]&&2===k[b[1]][1],a[0]?a:c?[!0,b]:a},y=x?d.combinations([0,1,2],2).reduce(z,[!1,null]):!1,p=4===k.length?[0,1].map(function(a){return 2===k[a][1]}).indexOf(!0):!1,o=t?new RoyalFlush(b):u&&n?new StraightFlush(b,v):q!==!1&&-1!==q?new FourOfAKind(b,k,q):h!==!1&&-1!==h?new FullHouse(b,k,h):n?new Flush(b):u?new Straight(b):w!==!1&&-1!==w?new ThreeOfAKind(b,k,w):y!==!1&&y[0]?new TwoPair(b,k,y[1]):p!==!1&&-1!==p?new OnePair(b,k,p):new HighCard(b),j=o.rankcmp(a),j>0?(console.log("new best: "+o.rank+": "+o.hand),o):a}catch(m){return l=m,console.error(l.stack)}},i=d.combinations(l,5).reduce(k,null),console.log("bestPlayer: "+b.best+b.ls),j=i.rankcmp(b.best),console.log("bhcmp: "+j),console.log("Best rank for player "+f.name+": ",+i.rank+"("+i.hand+")"),0===j?(console.log("Player has MATCHED "+b.best),m=b.ls,m.push(g),{best:b.best,ls:m}):j>0?(console.log("Player has BEAT "+b.best),{best:i,ls:[g]}):b)},this.state.players.reduce(b,{best:null,ls:[]})},dupCounts:function(a){var b;return b=function(a,b,c,d){var e;return a[0]!==b?(e=a[2],null!==a[0]&&(e=e.concat([[a[0],a[1]]])),c===d.length-1&&(e=e.concat([[b,1]])),[b,1,e]):c===d.length-1?(e=a[2],e=e.concat([[a[0],++a[1]]]),[a[0],a[1],e]):[a[0],++a[1],a[2]]},a.reduce(b,[null,0,[]])[2]},sortHand:function(a){var b;return b=function(a,b){return a.slice(0,-1)===b.slice(0,-1)?0:CARDS.indexOf(a.slice(0,-1))>CARDS.indexOf(b.slice(0,-1))},a.sort(b)},dealCommunityOrEnd:function(){switch(this.state.community){case"Preflop":return console.log("Dealing Flop..."),this.setState({communityCards:{flop:[table.deck.shift(),table.deck.shift(),table.deck.shift()]},community:"Flop"});case"Flop":return console.log("Dealing Turn..."),this.setState({communityCards:{flop:this.state.communityCards.flop,turn:table.deck.shift()},community:"Turn"}),console.log("Dealt Turn...");case"Turn":return console.log("Dealing River..."),this.setState({communityCards:{flop:this.state.communityCards.flop,turn:this.state.communityCards.turn,river:table.deck.shift()},community:"River"});case"River":return console.log("Ending hand..."),this.endHand(this.computeWinner()),this.setState({communityCards:{flop:[null,null,null],turn:null,river:null},community:"Preflop"})}},splitEven:function(a,b){var c;return c=a/b,Array.prototype.map.call([]+Array(b+1),function(){return c})},awardPotTo:function(a){var b,c,d,e;return e=this.state.players,console.log(a),a.ls.length>1?(b=this.splitEven(this.state.pot,a.ls.length),a.ls.map(function(a,c,d){var f;return console.log("Split awarding "+e[a].name+" $"+b),f=e[a],f.remaining=f.remaining+b,e[a]=f})):(d=a.ls[0],c=e[d],c.remaining=c.remaining+this.state.pot,console.log("Awarding "+c.name+" $"+this.state.pot),e[d]=c),this.setState({players:e,pot:0,bid:0}),console.log("Awarded pot...")},nextPlayersTurnOrEndHand:function(a,b){var c,d,e,f,g;for(f=(a+1)%this.state.players.length,console.log("Computing next turn: cp: "+a+" nap: "+f),d=!1,c=!0;f!==a&&!d;){if(d=!this.state.players[f].fold){c=!1;break}f=(f+1)%this.state.players.length,console.log("nap: "+f)}return d&&(g=this.state.players.map(function(a){return!a.fold}).reduce(function(a,b,c,d){return b?a+1:a},0),console.log("Number of active players: "+g),g>1?(this.setState({turn:this.state.players[f].name}),window.messageBus.broadcast(JSON.stringify({status:"turn",data:{turn:this.state.turn}}))):(e=!0,c=!0)),"check"===b&&this.state.lastRaised===a&&(c=!0),c?(console.log("This round of bidding is over"),e?(console.log("handOver"),console.log(this.state.players[f].name+" has won"),this.endHand({best:null,ls:[f]}),this.setState({communityCards:{flop:[null,null,null],turn:null,river:null},community:"Preflop"})):this.dealCommunityOrEnd()):void 0},playerAction:function(a,b,c){var d,e,f,g;return e=this.state.players.map(function(a){return a.id}).indexOf(a),f=this.state.players,console.log("player_index is "+e),d=f[e],g=c(d,e),console.log("success? "+g),f[e]=d,this.setState({players:f}),g?this.nextPlayersTurnOrEndHand(e,b):void 0},foldPlayer:function(a){return this.playerAction(a,"fold",function(b,c){return b.fold=!0,console.log(b.name+" has folded their hand"),window.messageBus.send(a,JSON.stringify({status:"foldok",data:{}}))}),!0},raisePlayer:function(a,b){var c;return c=this,this.playerAction(a,"raise",function(d,e){var f,g,h;try{return console.log(d.name+" raised by "+b.amount),h=c.state.bid-d.bid+b.amount,console.log(d.name+" is adding "+h+" to the pot"),d.remaining-h>=0&&d.name===c.state.turn?(d.bid=d.bid+h,d.remaining=d.remaining-h,c.setState({lastRaised:e,bid:d.bid,pot:c.state.pot+h}),window.messageBus.send(a,JSON.stringify({status:"raiseok",data:{remaining:d.remaining,bid:d.bid}})),window.messageBus.broadcast(JSON.stringify({status:"maxbid",data:{maxbid:c.state.bid}})),!0):(window.messageBus.send(a,JSON.stringify({status:"raisefail",data:{reason:"Insufficient funds to raise this much"}})),!1)}catch(g){return f=g,console.error(f)}})},callPlayer:function(a){var b;return b=this,this.playerAction(a,"call",function(c,d){var e;return e=b.state.bid-c.bid,c.remaining-e>=0?(c.bid=c.bid+e,c.remaining=c.remaining-e,b.setState({pot:b.state.pot+e}),window.messageBus.send(a,JSON.stringify({status:"callok",data:{remaining:c.remaining,pot:b.state.pot+e,bid:c.bid}})),!0):(window.messageBus.send(a,JSON.stringify({status:"callfail",data:{reason:"Insufficient funds to call the bid"}})),!1)})},checkPlayer:function(a){var b;return b=this,this.playerAction(a,"check",function(c,d){return c.bid===b.state.bid?(window.messageBus.send(a,JSON.stringify({status:"checkok",data:{}})),!0):(window.messageBus.send(a,JSON.stringify({status:"checkfail",data:{reason:"You must call or fold since your bid doesn't match current top bid"}})),!1)})},handleMessage:function(a,b,c){switch(c.action){case"fold":return this.foldPlayer(b);case"raise":return this.raisePlayer(b,c.data);case"call":return this.callPlayer(b);case"check":return this.checkPlayer(b);default:return console.error("Unknown message received")}},generateSortedDeck:function(){var a,b,c,d,e,f,g;for(a=[],c=0,d=SUITS.length;d>c;c++)for(g=SUITS[c],f=0,e=CARDS.length;e>f;f++)b=CARDS[f],a.push(b+g);return a},shuffle:function(a){var b,c,d;for(b=a.length;b>0;)c=Math.floor(Math.random()*b),b--,d=a[b],a[b]=a[c],a[c]=d;return a},dealHand:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(m=[],h=0,2===table.players.length?(o=a,c=1-a):(o=(a+1)%table.players.length,c=(o+1)%table.players.length),n=this.state.players,i=0,j=n.length;j>i;i++){k=n[i],b=o===h?table.rules.smallBlind:c===h?table.rules.bigBlind:0,l={id:k.id,name:k.name,dealer:a===h,blind:o===h?"S":c===h?"B":"N",bid:b,remaining:k.remaining-b,fold:!1,hand:[table.deck.shift(),table.deck.shift()]},m.push(l);try{window.messageBus.send(l.id,JSON.stringify({status:"deal",data:l}))}catch(e){d=e,console.error(d)}h++}g=m[(c+1)%m.length].name;try{window.messageBus.broadcast(JSON.stringify({status:"turn",data:{turn:g}})),window.messageBus.broadcast(JSON.stringify({status:"maxbid",data:{maxbid:table.rules.bigBlind}})),this.setState({players:m,bid:table.rules.bigBlind,pot:table.rules.bigBlind+table.rules.smallBlind,hand:this.state.hand+1})}catch(f){d=f,console.error(d)}return[c,g,m]},getInitialState:function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(table.deck=this.shuffle(this.generateSortedDeck()),c=Math.floor(Math.random()*table.players.length),2===table.players.length?(l=c,b=1-c):(l=(c+1)%table.players.length,b=(l+1)%table.players.length),d=table.players[(b+1)%table.players.length].name,e=0,j=[],k=table.players,f=0,g=k.length;g>f;f++)h=k[f],a=l===e?table.rules.smallBlind:b===e?table.rules.bigBlind:0,i={id:h.id,name:h.name,dealer:!1,blind:"N",bid:0,remaining:table.rules.buyIn,fold:!1,hand:[null,null]},j.push(i),e++;return{community:"Preflop",communityCards:{flop:[null,null,null],turn:null,river:null},players:j,dealer:c,turn:d,lastRaised:b,bid:0,pot:0,hand:0}},componentDidMount:function(){return this.dealHand(this.state.dealer)},render:function(){return React.createElement("div",null,React.createElement(TableInfo,{cards:this.state.communityCards,communityState:this.state.community,bid:this.state.bid,pot:this.state.pot,hand:this.state.hand}),React.createElement(Players,{players:this.state.players,turn:this.state.turn}))}}),HighCard=function(){function a(a){this.hand=a,this.rank="HC"}return a.prototype.intcmp=function(a,b){return a>b?1:b>a?-1:0},a.prototype.zipcmp=function(a,b){var c,d;return d=this,a.length!==b.length?a.length>b.length?1:-1:(c=function(a,c,e,f){return 0!==a?a:d.intcmp(c,b[e])},a.reduce(c,0))},a.prototype.rankcmp=function(a){var b,c;return null===a?1:(b=RANKS.indexOf(this.rank),c=RANKS.indexOf(a.rank),b>c?1:c>b?-1:(console.log("Same rank: "+this.rank+", using tiebreaker..."),this.tiebreaker(a)))},a.prototype.val=function(a){return["2","3","4","5","6","7","8","9","10","J","Q","K","A"].indexOf(a.slice(0,-1))},a.prototype.tiebreaker=function(a){var b,c,d,e,f,g;return g=this,f=function(a,b,c,d){return b>a?b:a},c=function(a){return g.val(a)},d=this.hand.map(c).reduce(f,-1),e=a.hand.map(c).reduce(f,-1),b=this.intcmp(d,e),0===b?(console.log("High cards are the same: "+d),this.zipcmp(this.hand.map(c),a.hand.map(c))):b},a}(),OnePair=function(a){function b(a,b,c){this.hand=a,this.counts=b,this.i=c,this.rank="1P"}return extend(b,a),b.prototype.tiebreaker=function(a){var b,c,d;return b=this.counts[this.i][0],c=a.counts[a.i][0],b===c?(d=function(a){return function(b,c,d,e){var f;return d===a?b:(f=b,f=f.concat([c[0]]))}},this.zipcmp(this.counts.reduce(d(this.i),[]),a.counts.reduce(d(a.i),[]))):b>c?1:-1},b}(HighCard),TwoPair=function(a){function b(a,b,c){this.hand=a,this.counts=b,this.rank="2P",this.i=c[0],this.j=c[1]}return extend(b,a),b.prototype.tiebreaker=function(a){var b,c,d,e,f,g,h,i;return i=this,h=function(a,b,c){return[a,b].map(function(a){return[a,c[a][0]]}).sort(function(a,b){return b[1]-a[1]})},d=h(this.i,this.j,this.counts),f=h(a.i,a.j,a.counts),g=function(a,b,c,d){return 0!==a?a:i.intcmp(b[1],f[c][1])},b=d.reduce(g,0),0===b?(console.log("Two pair is the same, reviewing kicker"),c=this.counts[3-this.i-this.j][0],e=a.counts[3-a.i-a.j][0],this.intcmp(c,e)):b},b}(HighCard),ThreeOfAKind=function(a){function b(a,b,c){this.hand=a,this.counts=b,this.ti=c,this.rank="3K"}return extend(b,a),b.prototype.tiebreaker=function(a){var b,c;return b=this.intcmp(this.counts[this.ti][0],a.counts[a.ti][0]),0!==b||(c=function(a){return function(b,c,d,e){var f;return d===a?b:(f=b,f=f.concat([c[0]]))}}),this.zipcmp(this.counts.reduce(c(this.ti),[]),a.counts.reduce(c(a.ti),[]))},b}(HighCard),Straight=function(a){function b(a,b){this.hand=a,this.sh=b,this.rank="ST"}return extend(b,a),b.prototype.tiebreaker=function(a){return this.intcmp(this.sh,a.sh)},b}(HighCard),Flush=function(a){function b(a){this.hand=a,this.rank="FL"}return extend(b,a),b.prototype.tiebreaker=function(a){var b,c;return b=this.hand,b.reverse(),c=a.hand,c.reverse(),this.zipcmp(b,c)},b}(HighCard),FullHouse=function(a){function b(a,b,c){this.hand=a,this.counts=b,this.fhi=c,this.rank="FH"}return extend(b,a),b.prototype.tiebreaker=function(a){var b;return b=this.intcmp(this.counts[this.fhi][0],a.counts[a.fhi][0]),0!==b?b:this.intcmp(this.counts[1-this.fhi][0],a.counts[1-a.fhi][0])},b}(HighCard),FourOfAKind=function(a){function b(a,b,c){this.hand=a,this.counts=b,this.fki=c,this.rank="4K"}return extend(b,a),b.prototype.tiebreaker=function(a){var b;return b=this.intcmp(this.counts[this.fki][0],a.counts[a.fki][0]),0!==b?b:this.intcmp(this.counts[1-this.fki][0],a.counts[1-a.fki][0])},b}(HighCard),StraightFlush=function(a){function b(a,b){this.hand=a,this.sh=b,this.rank="SF"}return extend(b,a),b}(Straight),RoyalFlush=function(a){function b(a){this.hand=a,this.rank="RF"}return extend(b,a),b.prototype.tiebreaker=function(a){return 0},b}(HighCard),table={state:null,prevState:null,container:null,players:[],state_data:null,host:null,rules:{buyIn:1e3,bigBlind:10,smallBlind:5},states:{init:InitState,main:MainState},handleMessage:function(a,b){var c,d,e,f,g,h;switch(e=function(c){var d;return d=function(c,d){var e,f,g;return null===c&&d.name===b.data.name?(f=[d.id,a].map(function(a){return a.split(":")[0]}),e=f[0],g=f[1],e===g?d.id:null):c},c.reduce(d,null)},b.action){case"join":if("init"===this.state){console.log("init>join");try{return g=e(this.players),console.log(g),null!==e(this.players)?this.host===b.data.name?(console.log("Reconnecting host"+b.data.name),window.messageBus.send(a,JSON.stringify({status:"host",data:{}}))):console.log("Reconnecting "+b.data.name):(console.log("Player joining "+b.data.name),0===this.players.length&&(console.log("First person joined: "+b.data.name),this.host=b.data.name,window.messageBus.send(a,JSON.stringify({status:"host",data:{}}))),this.players.push({name:b.data.name,id:a}),console.log(this.players),this.container.setState({players:this.players}))}catch(d){return c=d,console.error(c)}}else{if("main"!==this.state)return console.error("Cannot join once game has begun!");if(g=e(this.players),null!==g)return h=function(b,c,d,e){return b?b:c.id===g?(e[d].id=a,e[d]):void 0},f=this.players.reduce(h,null),window.messageBus.send(a,JSON.stringify({status:"start",data:{}}))}break;default:return this.container.handleMessage(this,a,b)}},setState:function(a,b){return this.state===a&&null!==this.container?(displayText("Updating state: "+b),this.container.setProps(b)):(displayText("Setting state to: "+a),this.prevState=this.state,this.state=a,this.container=React.render(React.createElement(this.states[a],b),document.getElementById("content")))}},window.onload=function(){return cast.receiver.logger.setLevelValue(0),window.castReceiverManager=cast.receiver.CastReceiverManager.getInstance(),"undefined"!=typeof console&&("undefined"!=typeof console.log?console.olog=console.log:console.olog=function(){return{}}),console.log=function(a){return console.olog(a),displayText(a)},console.error=console.debug=console.info=console.log,console.log("Starting Receiver Manager"),table.setState("init",{}),castReceiverManager.onReady=function(a){return console.log("Received Ready event: "+JSON.stringify(a.data)),window.castReceiverManager.setApplicationState("Application status is ready...")},castReceiverManager.onSenderConnected=function(a){return console.log("Received Sender Connected event: "+a.data),console.log(window.castReceiverManager.getSender(a.datxa).userAgent)},castReceiverManager.onSenderDisconnected=function(a){return console.log("Received Sender Disconnected event: "+a.data),0===window.castReceiverManager.getSenders().length?window.close():void 0},castReceiverManager.onSystemVolumeChanged=function(a){return console.log("Received System Volume Changed event: "+a.data.level+" "+a.data.muted)},window.messageBus=window.castReceiverManager.getCastMessageBus("urn:x-cast:sadikov.apps.pokair"),window.messageBus.onMessage=function(a){return console.log("Message ["+a.senderId+"]: "+a.data),table.handleMessage(a.senderId,JSON.parse(a.data))},window.castReceiverManager.start({statusText:"Application is starting"}),console.log("Receiver Manager started")},displayText=function(a){var b;return b=document.getElementById("message"),b.innerHTML+="\n"+a,b.scrollTop=b.scrollHeight};