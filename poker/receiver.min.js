var Button,ButtonGroup,CardImage,Col,ConnectedPlayers,DropdownButton,Grid,Input,Jumbotron,Label,ListGroup,ListGroupItem,MainState,MenuItem,Nav,NavItem,Navbar,PageHeader,Panel,Row,Table,WaitingForPlayers,displayText,table;DropdownButton=ReactBootstrap.DropdownButton,ListGroupItem=ReactBootstrap.ListGroupItem,ButtonGroup=ReactBootstrap.ButtonGroup,PageHeader=ReactBootstrap.PageHeader,Jumbotron=ReactBootstrap.Jumbotron,ListGroup=ReactBootstrap.ListGroup,MenuItem=ReactBootstrap.MenuItem,NavItem=ReactBootstrap.NavItem,Button=ReactBootstrap.Button,Navbar=ReactBootstrap.Navbar,Input=ReactBootstrap.Input,Table=ReactBootstrap.Table,Label=ReactBootstrap.Label,Panel=ReactBootstrap.Panel,Grid=ReactBootstrap.Grid,Row=ReactBootstrap.Row,Col=ReactBootstrap.Col,Nav=ReactBootstrap.Nav,CardImage=React.createClass({render:function(){return React.createElement("object",{data:"/images/"+("H"===this.props.card[1]?"Hearts":"S"===this.props.card[1]?"Spades":"C"===this.props.card[1]?"Clubs":"D"===this.props.card[1]?"Diamonds":void 0)+"/"+this.props.card+".svg",type:"image/svg+xml",className:this.props.className})}}),ConnectedPlayers=React.createClass({render:function(){return React.createElement(Panel,{header:"Connected players"},React.createElement(Table,{striped:!0,bordered:!0,condensed:!0},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"ID"),React.createElement("th",null,"name"))),this.props.players.map(function(a){return React.createElement("tr",null,React.createElement("td",null,a.id),React.createElement("td",null,a.name))})))}}),WaitingForPlayers=React.createClass({handleMessage:function(a,b,c){return"start"===c.action?window.messageBus.broadcast(JSON.stringify({status:"start",data:c.data})):void 0},getInitialState:function(){return{players:[]}},render:function(){return React.createElement("div",null,React.createElement(Grid,{id:"game-grid"},React.createElement(Row,{id:"row-game-main",className:"row-centered"},React.createElement(Col,{xs:8,md:8,lg:6},React.createElement("h3",null,"Waiting for players to join...")),React.createElement(Col,{xs:3,md:3,lg:3,xsoffset:2,mdoffset:3,lgoffset:4},React.createElement(ConnectedPlayers,{players:this.state.players})))))}}),MainState=React.createClass({handleMessage:function(){return{}},render:function(){return React.createElement("div",null,React.createElement(Grid,{id:"game-grid"},React.createElement(Row,{id:"row-game-main",className:"row-centered"},React.createElement(Col,{xs:8,md:8,lg:6},React.createElement("h3",null,"Table goes here")))))}}),table={state:null,prevState:null,container:null,players:[],state_data:null,host:null,states:{init:WaitingForPlayers,main:MainState},handleMessage:function(a,b){var c,d,e,f,g,h;switch(b.action){case"join":if("init"!==this.state)return console.error("Cannot join once game has begun!");for(g=!1,h=this.players,d=0,e=h.length;e>d;d++)f=h[d],f.name===b.data.name&&f.id.split(":")[0]===a.split(":")[0]&&(console.log("Reconnecting user "+f.name),g=!0,this.host===f.name&&(c={status:"host",data:{}},window.messageBus.send(a,JSON.stringify(c))));if(!g)return 0===this.players.length&&(console.log("First person joined: "+b.data.name),this.host=b.data.name,c={status:"host",data:{}},window.messageBus.send(a,JSON.stringify(c))),this.players.push({name:b.data.name,id:a}),console.log(this.players),this.container.setState({players:this.players});break;default:return this.container.handleMessage(this,a,b)}},setState:function(a,b){return this.state===a&&null!==this.container?(displayText("Updating state: "+b),this.container.setProps(b)):(displayText("Setting state to: "+a),this.prevState=this.state,this.state=a,this.container=React.render(React.createElement(this.states[a],b),document.getElementById("content")))}},window.onload=function(){return cast.receiver.logger.setLevelValue(0),window.castReceiverManager=cast.receiver.CastReceiverManager.getInstance(),"undefined"!=typeof console&&(console.olog="undefined"!=typeof console.log?console.log:function(){return{}}),console.log=function(a){return console.olog(a),displayText(a)},console.error=console.debug=console.info=console.log,console.log("Starting Receiver Manager"),table.setState("init",{}),castReceiverManager.onReady=function(a){return console.log("Received Ready event: "+JSON.stringify(a.data)),window.castReceiverManager.setApplicationState("Application status is ready...")},castReceiverManager.onSenderConnected=function(a){return console.log("Received Sender Connected event: "+a.data),console.log(window.castReceiverManager.getSender(a.datxa).userAgent)},castReceiverManager.onSenderDisconnected=function(a){return console.log("Received Sender Disconnected event: "+a.data),0===window.castReceiverManager.getSenders().length?window.close():void 0},castReceiverManager.onSystemVolumeChanged=function(a){return console.log("Received System Volume Changed event: "+a.data.level+" "+a.data.muted)},window.messageBus=window.castReceiverManager.getCastMessageBus("urn:x-cast:sadikov.apps.pokair"),window.messageBus.onMessage=function(a){return console.log("Message ["+a.senderId+"]: "+a.data),table.handleMessage(a.senderId,JSON.parse(a.data))},window.castReceiverManager.start({statusText:"Application is starting"}),console.log("Receiver Manager started")},displayText=function(a){var b;return b=document.getElementById("message"),b.innerHTML+="\n"+a,b.scrollTop=b.scrollHeight};